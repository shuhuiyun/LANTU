"use strict";(self["webpackChunk_22_project_20240328"]=self["webpackChunk_22_project_20240328"]||[]).push([[511],{511:function(t,e,o){o.r(e),o.d(e,{default:function(){return lt}});o(4114);var l=o(6768),a=o(4232),s=o(5130);const d={key:0,class:"container pb-4"},c=(0,l.Fv)('<div class="row d-none d-lg-flex py-4 border-bottom order__padding"><div class="col-1 p-0">商品</div><div class="col-3"></div><div class="col-2 text-center">單價</div><div class="col-2 text-center">數量</div><div class="col-2 text-center">總價</div><div class="col-2"></div></div>',1),i={class:"col-lg-1 col-2 p-0"},n=["src","alt"],r={class:"col-lg-3 col-2 d-none d-lg-flex"},u={class:"d-flex"},p=(0,l.Lk)("div",null,null,-1),h={class:"col-lg-2 d-none d-lg-block text-center"},v={class:"col-lg-2 col-6 text-center order-cart__num-btn"},k={class:"text-start text-truncate d-lg-none mb-2 mb-3 fs-lg-6"},b={class:"d-flex justify-content-start justify-content-lg-center"},g=["onClick"],m=(0,l.Lk)("i",{class:"bi bi-dash"},null,-1),L=[m],_=["onChange","value"],f=["onClick"],x=(0,l.Lk)("i",{class:"bi bi-plus"},null,-1),y=[x],C={class:"col-lg-2 col-2 p-0 text-center"},$={class:"col-lg-2 col-2 p-0 text-end"},w=["onClick"],P=(0,l.Lk)("i",{class:"bi bi-x-lg"},null,-1),F=[P],j={class:"mb-3 d-block d-md-none"},V={class:"input-group pt-4"},E=(0,l.Lk)("div",{id:"couponFeedback",class:"invalid-feedback"}," 尚未輸入優惠券 ",-1),X={class:"row py-4 order__padding-left justify-content-between flex-column flex-lg-row align-items-end align-items-lg-start"},q={class:"col-10 p-4 p-lg-0 col-md-6 col-lg-4 mb-3 d-none d-md-block"},N={class:"input-group mb-3"},D=(0,l.Lk)("div",{id:"couponFeedback",class:"invalid-feedback"}," 尚未輸入優惠券 ",-1),S={class:"col-10 col-md-6 order__padding-right border-bottom"},T={class:"row"},U={class:"row py-3"},K=(0,l.Lk)("div",{class:"col-7 text-start ps-5"},"小計",-1),M={class:"col-5 pe-3 text-end"},A={class:"row pb-3 text-primary"},I=(0,l.Lk)("div",{class:"col-7 text-start ps-5"},"優惠券",-1),z={key:0,class:"col-5 pe-3 text-end text-nowrap"},B={class:"col-12 text-end fs-4 mt-3 order__padding-right"},G={class:"row"},H={class:"row pb-3 text-dark"},J={class:"col-12 text-end fs-4 mt-3"},O={class:"row justify-content-between order__padding mt-4"},Q={key:1,class:"container cart-none"},R={class:"d-flex flex-column justify-content-center align-items-center pt-2 pb-3"},W=(0,l.Lk)("div",{class:"cart-none__icon mb-4"},[(0,l.Lk)("i",{class:"bi bi-cart-x fs-1 text-white"})],-1),Y=(0,l.Lk)("h3",{class:"pt-3 pb-5 text-dark fw-bold"},"購物車內尚無商品",-1);function Z(t,e,o,m,x,P){const Z=(0,l.g2)("LoadingSpinner"),tt=(0,l.g2)("VField"),et=(0,l.g2)("VForm");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(Z,{active:x.isLoading},null,8,["active"]),x.product[0]?((0,l.uX)(),(0,l.CE)("div",d,[c,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(x.product,(t=>((0,l.uX)(),(0,l.CE)("div",{class:"row order__padding py-4 border-bottom border-1 align-items-center",key:t.product.id},[(0,l.Lk)("div",i,[(0,l.Lk)("div",null,[(0,l.Lk)("img",{src:t.product.imageUrl,class:"w-100 border rounded",alt:t.product.title},null,8,n)])]),(0,l.Lk)("div",r,[(0,l.Lk)("div",null,[(0,l.Lk)("div",u,(0,a.v_)(t.product.title),1),p])]),(0,l.Lk)("div",h,(0,a.v_)(`$${t.product.price}`),1),(0,l.Lk)("div",v,[(0,l.Lk)("div",k,(0,a.v_)(t.product.title),1),(0,l.Lk)("div",b,[(0,l.Lk)("a",{href:"#",class:"rounded-start-circle","aria-label":"sub",onClick:(0,s.D$)((e=>P.changeProduct(t.product_id,-1)),["prevent"])},L,8,g),(0,l.Lk)("input",{class:"order-cart__num border-0 text-center",onChange:e=>P.updateProducts(t,Number(e.target.value)),value:t.qty},null,40,_),(0,l.Lk)("a",{href:"#",class:"rounded-end-circle","aria-label":"add",onClick:(0,s.D$)((e=>P.changeProduct(t.product_id,1)),["prevent"])},y,8,f)])]),(0,l.Lk)("div",C,(0,a.v_)(`$${t.total}`),1),(0,l.Lk)("div",$,[(0,l.Lk)("a",{href:"#",onClick:(0,s.D$)((e=>P.delProduct(t.id)),["prevent"]),class:"order-cart__del-btn","aria-label":"del"},F,8,w)])])))),128)),(0,l.Lk)("div",null,[(0,l.Lk)("div",j,[(0,l.bF)(et,null,{default:(0,l.k6)((({errors:t})=>[(0,l.Lk)("div",V,[(0,l.bF)(tt,{modelValue:x.coupon_code,"onUpdate:modelValue":e[0]||(e[0]=t=>x.coupon_code=t),name:"優惠券",class:(0,a.C4)(["form-control",{"is-invalid":t["優惠券"]}]),id:"coupon",placeholder:"輸入優惠券","aria-label":"輸入優惠券",type:"text",rules:"required"},null,8,["modelValue","class"]),(0,l.Lk)("button",{class:"btn btn-primary rounded-end-pill",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=(...t)=>P.addCouponCode&&P.addCouponCode(...t))}," 送出 "),E])])),_:1})])]),(0,l.Lk)("div",X,[(0,l.Lk)("div",q,[(0,l.bF)(et,null,{default:(0,l.k6)((({errors:t})=>[(0,l.Lk)("div",N,[(0,l.bF)(tt,{modelValue:x.coupon_code,"onUpdate:modelValue":e[2]||(e[2]=t=>x.coupon_code=t),name:"優惠券",class:(0,a.C4)(["form-control",{"is-invalid":t["優惠券"]}]),id:"coupon",placeholder:"輸入優惠券","aria-label":"輸入優惠券",type:"text",rules:"required"},null,8,["modelValue","class"]),(0,l.Lk)("button",{class:"btn btn-primary rounded-end-pill",type:"button",id:"button-addon2",onClick:e[3]||(e[3]=(...t)=>P.addCouponCode&&P.addCouponCode(...t))}," 送出 "),D])])),_:1})]),(0,l.Lk)("div",S,[(0,l.Lk)("div",T,[(0,l.Lk)("div",U,[K,(0,l.Lk)("div",M,(0,a.v_)(`NT$${x.total.total}`),1)]),(0,l.Lk)("div",A,[I,(x.isCouponCode,(0,l.uX)(),(0,l.CE)("div",z,(0,a.v_)("-NT$"+(x.total.total-x.total.final_total)),1))])])]),(0,l.Lk)("div",B,[(0,l.Lk)("div",G,[(0,l.Lk)("div",H,[(0,l.Lk)("div",J,(0,a.v_)(`NT$${x.total.final_total}`),1)])])])]),(0,l.Lk)("div",O,[(0,l.Lk)("button",{type:"button",onClick:e[4]||(e[4]=e=>t.$router.push("/user/cart")),class:"col-auto col-lg-auto btn btn-outline-primary order__btn"}," 繼續購物 "),(0,l.Lk)("button",{type:"button",class:"col-auto col-lg-auto btn btn-primary order__btn",onClick:e[5]||(e[5]=e=>t.$router.push("/order/info"))}," 下一步 ")])])):((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("div",R,[W,Y,(0,l.Lk)("button",{type:"button",class:"btn btn-primary px-5",onClick:e[6]||(e[6]=e=>t.$router.push("/user/cart"))}," 前往購物 ")])]))],64)}var tt={data(){return{product:[],total:{},isLoading:!1,isNew:!1,coupon_code:"",isCouponCode:!1}},inject:["emitter","$httpMessageState"],methods:{addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/patty-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"優惠券取得"),this.isCouponCode=!0,this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},changeProduct(t,e){const o="https://vue3-course-api.hexschool.io/api/patty-api/cart",l={product_id:t,qty:e};this.$http.post(o,{data:l}).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},delProduct(t){const e=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t}`;this.$http.delete(e).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},updateProducts(t,e){const o=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t.id}`,l={product_id:t.product_id,qty:e};this.$http.put(o,{data:l}).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},getProducts(){const t="https://vue3-course-api.hexschool.io/api/patty-api/cart";this.$http.get(t).then((t=>{this.isLoading=!1,this.product=t.data.data.carts,this.total.final_total=t.data.data.final_total,this.total.total=t.data.data.total})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))}},created(){this.isLoading=!0,this.getProducts()}},et=o(1241);const ot=(0,et.A)(tt,[["render",Z]]);var lt=ot}}]);
//# sourceMappingURL=511.0110d358.js.map
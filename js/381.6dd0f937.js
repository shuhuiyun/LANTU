(self["webpackChunk_22_project_20240328"]=self["webpackChunk_22_project_20240328"]||[]).push([[381],{2896:function(t,e,s){s(4114),
/*!
  * Bootstrap collapse.js v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,i){t.exports=i(s(6e3),s(1617),s(4822),s(1752))}(0,(function(t,e,s,i){"use strict";const n="collapse",l="bs.collapse",a=`.${l}`,o=".data-api",r=`show${a}`,c=`shown${a}`,d=`hide${a}`,h=`hidden${a}`,p=`click${a}${o}`,g="show",u="collapse",m="collapsing",_="collapsed",f=`:scope .${u} .${u}`,v="collapse-horizontal",k="width",L="height",y=".collapse.show, .collapse.collapsing",b='[data-bs-toggle="collapse"]',$={parent:null,toggle:!0},w={parent:"(null|element)",toggle:"boolean"};class x extends t{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=s.find(b);for(const n of i){const t=s.getSelectorFromElement(n),e=s.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(n)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $}static get DefaultType(){return w}static get NAME(){return n}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(y).filter((t=>t!==this._element)).map((t=>x.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const s=e.trigger(this._element,r);if(s.defaultPrevented)return;for(const e of t)e.hide();const i=this._getDimension();this._element.classList.remove(u),this._element.classList.add(m),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(m),this._element.classList.add(u,g),this._element.style[i]="",e.trigger(this._element,c)},l=i[0].toUpperCase()+i.slice(1),a=`scroll${l}`;this._queueCallback(n,this._element,!0),this._element.style[i]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=e.trigger(this._element,d);if(t.defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,i.reflow(this._element),this._element.classList.add(m),this._element.classList.remove(u,g);for(const e of this._triggerArray){const t=s.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(m),this._element.classList.add(u),e.trigger(this._element,h)};this._element.style[n]="",this._queueCallback(l,this._element,!0)}_isShown(t=this._element){return t.classList.contains(g)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=i.getElement(t.parent),t}_getDimension(){return this._element.classList.contains(v)?k:L}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(b);for(const e of t){const t=s.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=s.find(f,this._config.parent);return s.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(_,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const s=x.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof s[t])throw new TypeError(`No method named "${t}"`);s[t]()}}))}}return e.on(document,p,b,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of s.getMultipleElementsFromSelector(this))x.getOrCreateInstance(e,{toggle:!1}).toggle()})),i.defineJQueryPlugin(x),x}))},7381:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return J}});var i=s(6768),n=s(4232);const l=(0,i.Fv)('<div class="row align-items-center d-flex flex-column"><div class="col-12 fs-3 py-4 fw-bold border-bottom text-primary text-center"> 訂單查詢 </div></div><button type="button" class="accordion-button accordion-item p-3"><span class="d-none d-md-block">訂單編號</span><span>購買日期</span><span>總金額</span><span>訂單狀態</span><span style="width:20px;height:20px;"></span></button>',2),a={class:"accordion accordion-flush",id:"accordionFlushExample"},o=["id"],r=["data-bs-target","aria-controls"],c={class:"d-none d-md-block"},d=["id","aria-labelledby"],h={class:"accordion-body bg-light"},p={key:0,class:"hstack gap-3 mb-3"},g=(0,i.Lk)("div",{class:"text-danger fw-bold fs-4"},"尚未付款",-1),u=(0,i.Lk)("div",{class:"vr"},null,-1),m=["onClick"],_={class:"row"},f={class:"col-lg-6"},v=(0,i.Lk)("h4",{class:"mb-4 text-gray"},"寄送資訊",-1),k=(0,i.Lk)("span",{class:"me-5 text-gray"},"姓名",-1),L=(0,i.Lk)("span",{class:"me-5 text-gray"},"信箱",-1),y=(0,i.Lk)("span",{class:"me-5 text-gray"},"地址",-1),b={class:"col-lg-6"},$=(0,i.Lk)("h4",{class:"text-gray mb-4"},"購物明細",-1),w={class:"col-3"},x=["src","alt"],C={class:"col-6 justify-content-center d-flex flex-column"},A={class:"m-0"},E={class:"text-gray m-0"},T=(0,i.Lk)("span",null,[(0,i.Lk)("i",{class:"bi bi-x"})],-1),F={class:"col-3 d-flex justify-content-end align-items-center"},O={class:"row border-bottom m-0 p-3"},S={class:"row d-flex justify-content-end p-0 m-0"},j=(0,i.Lk)("div",{class:"col"},"小計",-1),N={class:"col text-end"},D={class:"row d-flex justify-content-end p-0 m-0"},I=(0,i.Lk)("div",{class:"col"},"優惠券",-1),X={class:"col text-end text-primary"},W={class:"row m-0 p-3"},q={class:"row d-flex justify-content-end p-0 m-0"},z={class:"text-end"};function K(t,e,s,K,M,P){return(0,i.uX)(),(0,i.CE)(i.FK,null,[l,(0,i.Lk)("div",a,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(M.tempOrder,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{class:"accordion-item",key:e.id},[(0,i.Lk)("h2",{class:"accordion-header",id:`flush-headingOne${s}`},[(0,i.Lk)("button",{class:"accordion-button collapsed shadow-none",type:"button","data-bs-toggle":"collapse","data-bs-target":`#flush-collapse${s}`,"aria-expanded":"false","aria-controls":`flush-collapse${s}`},[(0,i.Lk)("span",c,(0,n.v_)(e.id),1),(0,i.Lk)("span",null,(0,n.v_)(t.$filters.date(e.create_at)),1),(0,i.Lk)("span",null,(0,n.v_)(e.total),1),(0,i.Lk)("span",{class:(0,n.C4)(["fw-bold",{"text-danger":!e.is_paid,"text-success":e.is_paid}])},(0,n.v_)(e.is_paid?"已付款":"未付款"),3)],8,r)],8,o),(0,i.Lk)("div",{id:`flush-collapse${s}`,class:"accordion-collapse collapse","aria-labelledby":`flush-heading${s}`,"data-bs-parent":"#accordionFlushExample"},[(0,i.Lk)("div",h,[e.is_paid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",p,[g,u,(0,i.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>P.pay(e.id)}," 前往付款 ",8,m)])),(0,i.Lk)("div",_,[(0,i.Lk)("div",f,[v,(0,i.Lk)("p",null,[k,(0,i.eW)((0,n.v_)(e.user.name),1)]),(0,i.Lk)("p",null,[L,(0,i.eW)((0,n.v_)(e.user.email),1)]),(0,i.Lk)("p",null,[y,(0,i.eW)((0,n.v_)(e.user.address),1)])]),(0,i.Lk)("div",b,[$,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.products,(t=>((0,i.uX)(),(0,i.CE)("div",{class:"row border-bottom m-0 p-3",key:t.id},[(0,i.Lk)("div",w,[(0,i.Lk)("img",{class:"w-100 border rounded",src:t.product.imageUrl,alt:t.product.title},null,8,x)]),(0,i.Lk)("div",C,[(0,i.Lk)("p",A,(0,n.v_)(t.product.title),1),(0,i.Lk)("p",E,[(0,i.eW)((0,n.v_)(`$${t.product.price} `)+" ",1),T,(0,i.eW)(" "+(0,n.v_)(` ${t.qty} ${t.product.unit}`),1)])]),(0,i.Lk)("div",F,(0,n.v_)(`$${t.total}`),1)])))),128)),(0,i.Lk)("div",O,[(0,i.Lk)("div",S,[j,(0,i.Lk)("div",N,(0,n.v_)(`NT$${P.addTotal(e.products)}`),1)]),(0,i.Lk)("div",D,[I,(0,i.Lk)("div",X,(0,n.v_)(`-NT$${P.coupon(e.products)}`),1)])]),(0,i.Lk)("div",W,[(0,i.Lk)("div",q,[(0,i.Lk)("h4",z,(0,n.v_)(`NT$${e.total}`),1)])])])])])],8,d)])))),128))])],64)}var M=s(2896),P=s.n(M),Q={data(){return{show:!1,tempOrder:[]}},methods:{pay(t){const e=`https://vue3-course-api.hexschool.io/api/patty-api/pay/${t}`;this.$http.post(e).then((()=>{this.getOrders(this.$route.params.ordermail)})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得商品失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},addTotal(t){let e=0;const s=Object.values(t);return s.forEach((t=>{e+=t.total})),e},coupon(t){let e=0;const s=Object.values(t);return s.forEach((t=>{e+=t.total-t.final_total})),e},getOrders(t,e=1){const s=`https://vue3-course-api.hexschool.io/api/patty-api/orders/?page=${e}`;this.$http.get(s).then((e=>{this.orders=e.data.orders;const s=this.orders.filter((e=>e.user.email===t));this.tempOrder=s,this.pagination=e.data.pagination})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得商品失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},open(){}},created(){this.getOrders(this.$route.params.ordermail)},mounted(){const t=[].slice.call(document.querySelectorAll(".collapse"));this.collapseList=t.map((t=>new(P())(t,{toggle:!1})))}},B=s(1241);const U=(0,B.A)(Q,[["render",K]]);var J=U}}]);
//# sourceMappingURL=381.6dd0f937.js.map
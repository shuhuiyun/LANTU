"use strict";(self["webpackChunk_22_project_20240328"]=self["webpackChunk_22_project_20240328"]||[]).push([[617],{3998:function(t,o,e){e.r(o),e.d(o,{default:function(){return Z}});e(4114);var c=e(6768),l=e(4232),a=e(5130);const s={key:0,class:"container pb-4"},r=(0,c.Fv)('<div class="row d-none d-lg-flex py-4 border-bottom order__padding"><div class="col-1 p-0">商品</div><div class="col-3"></div><div class="col-2 text-center">單價</div><div class="col-2 text-center">數量</div><div class="col-2 text-center">總價</div><div class="col-2"></div></div>',1),d={class:"col-lg-1 col-2 p-0"},i=["src","alt"],n={class:"col-lg-3 col-2 d-none d-lg-flex"},u={class:"d-flex"},p=(0,c.Lk)("div",null,null,-1),v={class:"col-lg-2 d-none d-lg-block text-center"},h={class:"col-lg-2 col-6 text-center order-cart__num-btn"},b={class:"text-start text-truncate d-lg-none mb-2 mb-3 fs-lg-6"},k={class:"d-flex justify-content-start justify-content-lg-center"},g=["onClick"],_=(0,c.Lk)("i",{class:"bi bi-dash"},null,-1),L=[_],x=["onChange","value"],f=["onClick"],m=(0,c.Lk)("i",{class:"bi bi-plus"},null,-1),y=[m],C={class:"col-lg-2 col-2 p-0 text-center"},$={class:"col-lg-2 col-2 p-0 text-end"},w=["onClick"],P=(0,c.Lk)("i",{class:"bi bi-x-lg"},null,-1),j=[P],D={class:"row py-4 order__padding-left justify-content-between flex-column flex-lg-row align-items-end align-items-lg-start"},E={class:"col-10 p-4 p-lg-0 col-md-6 col-lg-4 mb-3"},X={class:"input-group mb-3"},N={class:"col-10 col-md-6 order__padding-right border-bottom"},F={class:"row"},q={class:"row py-3"},T=(0,c.Lk)("div",{class:"col-7 text-start ps-5"},"小計",-1),K={class:"col-5 pe-3 text-end"},U={class:"row pb-3 text-primary"},A=(0,c.Lk)("div",{class:"col-7 text-start ps-5"},"優惠券",-1),I={key:0,class:"col-5 pe-3 text-end text-nowrap"},J={class:"col-12 text-end fs-4 mt-3 order__padding-right"},S={class:"row"},V={class:"row pb-3 text-dark"},z={class:"col-12 text-end fs-4 mt-3"},B={class:"row justify-content-between order__padding mt-4"},G={key:1,class:"container cart-none"},H={class:"d-flex flex-column justify-content-center align-items-center pt-2 pb-3"},M=(0,c.Lk)("div",{class:"cart-none__icon mb-4"},[(0,c.Lk)("i",{class:"bi bi-cart-x fs-1 text-white"})],-1),O=(0,c.Lk)("h3",{class:"pt-3 pb-5 text-dark fw-bold"},"購物車內尚無商品",-1);function Q(t,o,e,_,m,P){const Q=(0,c.g2)("LoadingSpinner");return(0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.bF)(Q,{active:m.isLoading},null,8,["active"]),m.product[0]?((0,c.uX)(),(0,c.CE)("div",s,[r,((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(m.product,(t=>((0,c.uX)(),(0,c.CE)("div",{class:"row order__padding py-4 border-bottom border-1 align-items-center",key:t.product.id},[(0,c.Lk)("div",d,[(0,c.Lk)("div",null,[(0,c.Lk)("img",{src:t.product.imageUrl,class:"w-100 border rounded",alt:t.product.title},null,8,i)])]),(0,c.Lk)("div",n,[(0,c.Lk)("div",null,[(0,c.Lk)("div",u,(0,l.v_)(t.product.title),1),p])]),(0,c.Lk)("div",v,(0,l.v_)(`$${t.product.price}`),1),(0,c.Lk)("div",h,[(0,c.Lk)("div",b,(0,l.v_)(t.product.title),1),(0,c.Lk)("div",k,[(0,c.Lk)("a",{href:"#",class:"rounded-start-circle","aria-label":"sub",onClick:(0,a.D$)((o=>P.changeProduct(t.product_id,-1)),["prevent"])},L,8,g),(0,c.Lk)("input",{class:"order-cart__num border-0 text-center",onChange:o=>P.updateProducts(t,Number(o.target.value)),value:t.qty},null,40,x),(0,c.Lk)("a",{href:"#",class:"rounded-end-circle","aria-label":"add",onClick:(0,a.D$)((o=>P.changeProduct(t.product_id,1)),["prevent"])},y,8,f)])]),(0,c.Lk)("div",C,(0,l.v_)(`$${t.total}`),1),(0,c.Lk)("div",$,[(0,c.Lk)("a",{href:"#",onClick:(0,a.D$)((o=>P.delProduct(t.id)),["prevent"]),class:"order-cart__del-btn","aria-label":"del"},j,8,w)])])))),128)),(0,c.Lk)("div",D,[(0,c.Lk)("div",E,[(0,c.Lk)("div",X,[(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>m.coupon_code=t),type:"text",class:"form-control",placeholder:"輸入優惠券","aria-label":"輸入優惠券","aria-describedby":"button-addon2"},null,512),[[a.Jo,m.coupon_code]]),(0,c.Lk)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:o[1]||(o[1]=(0,a.D$)(((...t)=>P.addCouponCode&&P.addCouponCode(...t)),["prevent"]))}," 送出 ")])]),(0,c.Lk)("div",N,[(0,c.Lk)("div",F,[(0,c.Lk)("div",q,[T,(0,c.Lk)("div",K,(0,l.v_)(`NT$${m.total.total}`),1)]),(0,c.Lk)("div",U,[A,(m.isCouponCode,(0,c.uX)(),(0,c.CE)("div",I,(0,l.v_)("-NT$"+(m.total.total-m.total.final_total)),1))])])]),(0,c.Lk)("div",J,[(0,c.Lk)("div",S,[(0,c.Lk)("div",V,[(0,c.Lk)("div",z,(0,l.v_)(`NT$${m.total.final_total}`),1)])])])]),(0,c.Lk)("div",B,[(0,c.Lk)("button",{type:"button",onClick:o[2]||(o[2]=(0,a.D$)((o=>t.$router.push("/user/cart")),["prevent"])),class:"col-auto col-lg-auto btn btn-outline-primary order__btn"}," 繼續購物 "),(0,c.Lk)("button",{type:"button",class:"col-auto col-lg-auto btn btn-primary order__btn",onClick:o[3]||(o[3]=(0,a.D$)((o=>t.$router.push("/order/info")),["prevent"]))}," 下一步 ")])])):((0,c.uX)(),(0,c.CE)("div",G,[(0,c.Lk)("div",H,[M,O,(0,c.Lk)("button",{type:"button",class:"btn btn-primary px-5",onClick:o[4]||(o[4]=(0,a.D$)((o=>t.$router.push("/user/cart")),["prevent"]))}," 前往購物 ")])]))],64)}var R={data(){return{product:[],total:{},isLoading:!1,isNew:!1,coupon_code:"",isCouponCode:!1}},inject:["emitter"],methods:{addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/patty-api/coupon",o={code:this.coupon_code};this.$http.post(t,{data:o}).then((()=>{this.isCouponCode=!0,this.getProducts()})).catch((t=>{console.error("錯誤:",t)}))},changeProduct(t,o){const e="https://vue3-course-api.hexschool.io/api/patty-api/cart",c={product_id:t,qty:o};this.$http.post(e,{data:c}).then((()=>{this.getProducts()})).catch((t=>{console.error("錯誤:",t)}))},delProduct(t){const o=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t}`;this.$http.delete(o).then((()=>{this.getProducts()})).catch((t=>{console.error("錯誤:",t)}))},updateProducts(t,o){const e=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t.id}`,c={product_id:t.product_id,qty:o};this.$http.put(e,{data:c}).then((()=>{this.getProducts()})).catch((t=>{console.error("錯誤:",t)}))},getProducts(){const t="https://vue3-course-api.hexschool.io/api/patty-api/cart";this.$http.get(t).then((t=>{this.isLoading=!1,this.product=t.data.data.carts,this.total.final_total=t.data.data.final_total,this.total.total=t.data.data.total})).catch((t=>{console.error("錯誤:",t)}))}},created(){this.isLoading=!0,this.getProducts()}},W=e(1241);const Y=(0,W.A)(R,[["render",Q]]);var Z=Y}}]);
//# sourceMappingURL=617.083f69ab.js.map
"use strict";(self["webpackChunk_22_project_20240328"]=self["webpackChunk_22_project_20240328"]||[]).push([[753],{4106:function(t,e,l){l.d(e,{A:function(){return _}});var a=l(6768),s=l(4232),d=l(5130);const r={class:"modal",ref:"modal",tabindex:"-1",style:{"margin-top":"8%"}},o={class:"modal-dialog modal-sm"},n={class:"modal-content"},i={class:"modal-header"},c={class:"modal-title"},u=(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),p={class:"modal-body"},k=["textContent"],L={class:"modal-footer"},h=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function m(t,e,l,m,b,v){return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("h5",c,(0,s.v_)(`刪除${l.title}`),1),u]),(0,a.Lk)("div",p,[(0,a.Lk)("p",null,[(0,a.eW)(" 確定要刪除 "),(0,a.Lk)("span",{class:"fw-bold",textContent:(0,s.v_)(l.product.title||l.product.id)},null,8,k),(0,a.eW)(" "+(0,s.v_)(`這項${l.title}嗎？`),1)])]),(0,a.Lk)("div",L,[h,(0,a.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(0,d.D$)((e=>t.$emit("del-product",l.product)),["prevent"]))}," 確認 ")])])])],512)}var b=l(8282),v={data(){return{Mtitle:""}},props:["product","title"],mixins:[b.A]},g=l(1241);const y=(0,g.A)(v,[["render",m]]);var _=y},8789:function(t,e,l){l.d(e,{A:function(){return k}});var a=l(6768),s=l(4232),d=l(5130);const r={"aria-label":"Page navigation example "},o={class:"pagination justify-content-center"},n=["onClick"];function i(t,e,l,i,c,u){return(0,a.uX)(),(0,a.CE)("nav",r,[(0,a.Lk)("ul",o,[(0,a.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:!l.pages.has_pre}])},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:e[0]||(e[0]=(0,d.D$)((t=>u.prePage(l.pages.current_page)),["prevent"]))},"Previous")],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.pages.total_pages,(t=>((0,a.uX)(),(0,a.CE)("li",{class:(0,s.C4)(["page-item",{active:t===l.pages.current_page}]),style:{"border-radius":"5px"},key:t},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,d.D$)((e=>u.updatePage(t)),["prevent"])},(0,s.v_)(t),9,n)],2)))),128)),(0,a.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:!l.pages.has_next}])},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,d.D$)((t=>u.nextPage(l.pages.current_page)),["prevent"]))},"Next")],2)])])}var c={props:["pages"],methods:{updatePage(t){this.$emit("emit-page",t)},nextPage(t){this.$emit("emit-page",`${t+1}`)},prePage(t){this.$emit("emit-page",""+(t-1))}}},u=l(1241);const p=(0,u.A)(c,[["render",i]]);var k=p},3753:function(t,e,l){l.r(e),l.d(e,{default:function(){return vt}});var a=l(6768),s=l(5130),d=l(4232);const r={class:"g-5 products-list__content"},o={class:"row mt-5 border-bottom border-primary pb-4 border-1"},n=(0,a.Lk)("div",{class:"col-6 text-start h3 fw-bold m-0 text-dark"},"顧客訂單",-1),i={class:"col-6 text-end"},c={class:"table mt-2 table-borderless"},u=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"table-light"},[(0,a.Lk)("th",{width:"50 "},"購買時間"),(0,a.Lk)("th",{width:"100 "},"訂單編號"),(0,a.Lk)("th",{width:"120"},"Email"),(0,a.Lk)("th",{width:"350"},"購買款項"),(0,a.Lk)("th",{width:"120"},"應付金額"),(0,a.Lk)("th",{width:"100"},"是否付款"),(0,a.Lk)("th",{width:"120"})])],-1),p={class:"tr-style"},k={class:"py-2"},L={class:"text-right"},h={class:"list-unstyled"},m={class:"text-right"},b={key:0,class:"text-success"},v={key:1,class:"text-muted"},g={class:"pe-3"},y=["onClick"],_=(0,a.Lk)("i",{class:"bi bi-eye-fill"},null,-1),f=[_],C=["onClick"],P=(0,a.Lk)("i",{class:"bi bi-trash-fill"},null,-1),x=[P],$={key:0,class:"fs-2"};function E(t,e,l,_,P,E){const X=(0,a.g2)("LoadingSpinner"),M=(0,a.g2)("Pagination"),w=(0,a.g2)("ProductModal"),O=(0,a.g2)("DelProductModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(X,{active:P.isLoading},null,8,["active"]),(0,a.Lk)("div",r,[(0,a.Lk)("div",o,[n,(0,a.Lk)("div",i,[(0,a.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(0,s.D$)((t=>E.delorder()),["prevent"]))}," 刪除全部訂單 ")])]),(0,a.Lk)("table",c,[u,(0,a.Lk)("tbody",p,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.orders,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",k,(0,d.v_)(t.$filters.date(e.create_at)),1),(0,a.Lk)("td",null,(0,d.v_)(e.id),1),(0,a.Lk)("td",null,(0,d.v_)(e.user.email),1),(0,a.Lk)("td",L,[(0,a.Lk)("ul",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.products,(t=>((0,a.uX)(),(0,a.CE)("li",{key:t.product.id},(0,d.v_)(t.product.title)+" 數量："+(0,d.v_)(t.qty)+" "+(0,d.v_)(t.product.unit),1)))),128))])]),(0,a.Lk)("td",m,(0,d.v_)(t.$filters.currency(e.total)),1),(0,a.Lk)("td",null,[e.is_paid?((0,a.uX)(),(0,a.CE)("span",b,"已付款")):((0,a.uX)(),(0,a.CE)("span",v,"未付款"))]),(0,a.Lk)("td",g,[(0,a.Lk)("button",{type:"button",class:"product__button edit",onClick:(0,s.D$)((t=>E.openModal(e)),["prevent"])},f,8,y),(0,a.Lk)("button",{type:"button",class:"product__button del",onClick:(0,s.D$)((t=>E.openDelModal(e)),["prevent"])},x,8,C)])])))),128))])]),(0,a.bF)(M,{onEmitPage:E.getProducts,pages:P.pagination},null,8,["onEmitPage","pages"])]),t.orders?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",$,"目前還沒有訂單。")),(0,a.bF)(w,{onUpdateProduct:t.updateProduct,order:P.tempProduct,ref:"productModal"},null,8,["onUpdateProduct","order"]),(0,a.bF)(O,{product:P.tempProduct,title:P.title,onDelProduct:E.delProduct,ref:"delProductModal"},null,8,["product","title","onDelProduct"])],64)}const X={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-xl"},w={class:"modal-content"},O=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"訂單細節"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body container"},A={class:"row"},F={key:0,class:"col-6"},j=(0,a.Lk)("h4",null,"用戶資料",-1),K={class:"table"},I={key:0},Q=(0,a.Lk)("th",{style:{width:"100px"}},"姓名",-1),q=(0,a.Lk)("th",null,"Email",-1),S=(0,a.Lk)("th",null,"電話",-1),U=(0,a.Lk)("th",null,"地址",-1),W={class:"col-6"},N={class:"row"},z={class:"col-12"},B=(0,a.Lk)("h4",null,"訂單細節",-1),G={class:"table"},H=(0,a.Lk)("th",{style:{width:"100px"}},"訂單編號",-1),J=(0,a.Lk)("th",null,"下單時間",-1),R=(0,a.Lk)("th",null,"付款時間",-1),T={key:0},V={key:1},Y=(0,a.Lk)("th",null,"付款狀態",-1),Z={key:0,class:"text-success"},tt={key:1,class:"text-muted"},et=(0,a.Lk)("th",null,"總金額",-1),lt={class:"col-12"},at=(0,a.Lk)("h4",null,"選購商品",-1),st={class:"table"},dt=(0,a.Lk)("thead",null,[(0,a.Lk)("tr")],-1),rt={class:"text-end"},ot=(0,a.Lk)("div",{class:"modal-footer"},[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function nt(t,e,l,s,r,o){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",M,[(0,a.Lk)("div",w,[O,(0,a.Lk)("div",D,[(0,a.Lk)("div",A,[r.tempOrder.user?((0,a.uX)(),(0,a.CE)("div",F,[j,(0,a.Lk)("table",K,[r.tempOrder.user?((0,a.uX)(),(0,a.CE)("tbody",I,[(0,a.Lk)("tr",null,[Q,(0,a.Lk)("td",null,(0,d.v_)(r.tempOrder.user.name),1)]),(0,a.Lk)("tr",null,[q,(0,a.Lk)("td",null,(0,d.v_)(r.tempOrder.user.email),1)]),(0,a.Lk)("tr",null,[S,(0,a.Lk)("td",null,(0,d.v_)(r.tempOrder.user.tel),1)]),(0,a.Lk)("tr",null,[U,(0,a.Lk)("td",null,(0,d.v_)(r.tempOrder.user.address),1)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",W,[(0,a.Lk)("div",N,[(0,a.Lk)("div",z,[B,(0,a.Lk)("table",G,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[H,(0,a.Lk)("td",null,(0,d.v_)(r.tempOrder.id),1)]),(0,a.Lk)("tr",null,[J,(0,a.Lk)("td",null,(0,d.v_)(t.$filters.date(r.tempOrder.create_at)),1)]),(0,a.Lk)("tr",null,[R,(0,a.Lk)("td",null,[r.tempOrder.paid_date?((0,a.uX)(),(0,a.CE)("span",T,(0,d.v_)(t.$filters.date(r.tempOrder.paid_date)),1)):((0,a.uX)(),(0,a.CE)("span",V,"時間不正確"))])]),(0,a.Lk)("tr",null,[Y,(0,a.Lk)("td",null,[r.tempOrder.is_paid?((0,a.uX)(),(0,a.CE)("strong",Z,"已付款")):((0,a.uX)(),(0,a.CE)("span",tt,"尚未付款"))])]),(0,a.Lk)("tr",null,[et,(0,a.Lk)("td",null,(0,d.v_)(t.$filters.currency(r.tempOrder.total)),1)])])])]),(0,a.Lk)("div",lt,[at,(0,a.Lk)("table",st,[dt,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.tempOrder.products,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("th",null,(0,d.v_)(e.product.title),1),(0,a.Lk)("td",null,(0,d.v_)(e.qty)+" / "+(0,d.v_)(e.product.unit),1),(0,a.Lk)("td",rt,(0,d.v_)(t.$filters.currency(e.final_total)),1)])))),128))])])])])])])]),ot])])],512)}var it=l(8282),ct={props:{order:{type:Object,default(){return{}}}},watch:{order(){this.tempOrder=this.order}},data(){return{modal:{},tempOrder:{}}},methods:{},mixins:[it.A]},ut=l(1241);const pt=(0,ut.A)(ct,[["render",nt]]);var kt=pt,Lt=l(4106),ht=l(8789),mt={data(){return{products:[],pagination:{},tempProduct:{},title:"訂單",isLoading:!1}},components:{ProductModal:kt,DelProductModal:Lt.A,Pagination:ht.A},inject:["emitter","$httpMessageState"],methods:{delorder(){const t="https://vue3-course-api.hexschool.io/api/patty-api/admin/orders/all";this.$http.delete(t).then((()=>{})).catch((t=>{console.error("錯誤:",t)}))},getProducts(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/patty-api/admin/orders/?page=${t}`;this.$http.get(e).then((t=>{this.isLoading=!1,this.orders=t.data.orders,console.log(this.orders),this.pagination=t.data.pagination})).catch((t=>{console.error("錯誤:",t)}))},openModal(t){this.tempProduct={...t};const e=this.$refs.productModal;e.showModal()},openDelModal(t){this.tempProduct={...t};const e=this.$refs.delProductModal;e.showModal()},delProduct(t){const e=this.$refs.delProductModal;this.tempProduct=t;const l=`https://vue3-course-api.hexschool.io/api/patty-api/admin/order/${t.id}`;this.$http.delete(l,this.tempProduct).then((()=>{e.hideModal(),this.getProducts()})).catch((t=>{console.error("錯誤:",t)}))}},created(){this.getProducts()}};const bt=(0,ut.A)(mt,[["render",E]]);var vt=bt}}]);
//# sourceMappingURL=753.bb0c8182.js.map
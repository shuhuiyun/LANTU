"use strict";(self["webpackChunk_22_project_20240328"]=self["webpackChunk_22_project_20240328"]||[]).push([[340],{1340:function(t,e,o){o.r(e),o.d(e,{default:function(){return et}});o(4114);var a=o(6768),l=o(4232),c=o(5130);const s={key:0,class:"container pb-4"},d=(0,a.Fv)('<div class="row d-none d-lg-flex py-4 border-bottom order__padding"><div class="col-1 p-0">商品</div><div class="col-3"></div><div class="col-2 text-center">單價</div><div class="col-2 text-center">數量</div><div class="col-2 text-center">總價</div><div class="col-2"></div></div>',1),i={class:"col-lg-1 col-2 p-0"},n=["src","alt"],r={class:"col-lg-3 col-2 d-none d-lg-flex"},u={class:"d-flex"},p=(0,a.Lk)("div",null,null,-1),h={class:"col-lg-2 d-none d-lg-block text-center"},b={class:"col-lg-2 col-6 text-center order-cart__num-btn"},v={class:"text-start text-truncate d-lg-none mb-2 mb-3 fs-lg-6"},k={class:"d-flex justify-content-start justify-content-lg-center"},g=["onClick"],m=(0,a.Lk)("i",{class:"bi bi-dash"},null,-1),L=[m],_=["onChange","value"],y=["onClick"],x=(0,a.Lk)("i",{class:"bi bi-plus"},null,-1),C=[x],f={class:"col-lg-2 col-2 p-0 text-center"},$={class:"col-lg-2 col-2 p-0 text-end"},w=["onClick"],P=(0,a.Lk)("i",{class:"bi bi-x-lg"},null,-1),j=[P],E={class:"mb-3 d-block d-md-none"},X={class:"input-group pt-4"},N={class:"row py-4 order__padding-left justify-content-between flex-column flex-lg-row align-items-end align-items-lg-start"},F={class:"col-10 p-4 p-lg-0 col-md-6 col-lg-4 mb-3 d-none d-md-block"},q={class:"input-group mb-3"},D={class:"col-10 col-md-6 order__padding-right border-bottom"},T={class:"row"},U={class:"row py-3"},J=(0,a.Lk)("div",{class:"col-7 text-start ps-5"},"小計",-1),K={class:"col-5 pe-3 text-end"},S={class:"row pb-3 text-primary"},V=(0,a.Lk)("div",{class:"col-7 text-start ps-5"},"優惠券",-1),A={key:0,class:"col-5 pe-3 text-end text-nowrap"},I={class:"col-12 text-end fs-4 mt-3 order__padding-right"},M={class:"row"},z={class:"row pb-3 text-dark"},B={class:"col-12 text-end fs-4 mt-3"},G={class:"row justify-content-between order__padding mt-4"},H={key:1,class:"container cart-none"},O={class:"d-flex flex-column justify-content-center align-items-center pt-2 pb-3"},Q=(0,a.Lk)("div",{class:"cart-none__icon mb-4"},[(0,a.Lk)("i",{class:"bi bi-cart-x fs-1 text-white"})],-1),R=(0,a.Lk)("h3",{class:"pt-3 pb-5 text-dark fw-bold"},"購物車內尚無商品",-1);function W(t,e,o,m,x,P){const W=(0,a.g2)("LoadingSpinner");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(W,{active:x.isLoading},null,8,["active"]),x.product[0]?((0,a.uX)(),(0,a.CE)("div",s,[d,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(x.product,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"row order__padding py-4 border-bottom border-1 align-items-center",key:t.product.id},[(0,a.Lk)("div",i,[(0,a.Lk)("div",null,[(0,a.Lk)("img",{src:t.product.imageUrl,class:"w-100 border rounded",alt:t.product.title},null,8,n)])]),(0,a.Lk)("div",r,[(0,a.Lk)("div",null,[(0,a.Lk)("div",u,(0,l.v_)(t.product.title),1),p])]),(0,a.Lk)("div",h,(0,l.v_)(`$${t.product.price}`),1),(0,a.Lk)("div",b,[(0,a.Lk)("div",v,(0,l.v_)(t.product.title),1),(0,a.Lk)("div",k,[(0,a.Lk)("a",{href:"#",class:"rounded-start-circle","aria-label":"sub",onClick:(0,c.D$)((e=>P.changeProduct(t.product_id,-1)),["prevent"])},L,8,g),(0,a.Lk)("input",{class:"order-cart__num border-0 text-center",onChange:e=>P.updateProducts(t,Number(e.target.value)),value:t.qty},null,40,_),(0,a.Lk)("a",{href:"#",class:"rounded-end-circle","aria-label":"add",onClick:(0,c.D$)((e=>P.changeProduct(t.product_id,1)),["prevent"])},C,8,y)])]),(0,a.Lk)("div",f,(0,l.v_)(`$${t.total}`),1),(0,a.Lk)("div",$,[(0,a.Lk)("a",{href:"#",onClick:(0,c.D$)((e=>P.delProduct(t.id)),["prevent"]),class:"order-cart__del-btn","aria-label":"del"},j,8,w)])])))),128)),(0,a.Lk)("div",null,[(0,a.Lk)("div",E,[(0,a.Lk)("div",X,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>x.coupon_code=t),type:"text",class:"form-control",placeholder:"輸入優惠券","aria-label":"輸入優惠券","aria-describedby":"button-addon2"},null,512),[[c.Jo,x.coupon_code]]),(0,a.Lk)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=(...t)=>P.addCouponCode&&P.addCouponCode(...t))}," 送出 ")])])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",F,[(0,a.Lk)("div",q,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>x.coupon_code=t),type:"text",class:"form-control",placeholder:"輸入優惠券","aria-label":"輸入優惠券","aria-describedby":"button-addon2"},null,512),[[c.Jo,x.coupon_code]]),(0,a.Lk)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:e[3]||(e[3]=(...t)=>P.addCouponCode&&P.addCouponCode(...t))}," 送出 ")])]),(0,a.Lk)("div",D,[(0,a.Lk)("div",T,[(0,a.Lk)("div",U,[J,(0,a.Lk)("div",K,(0,l.v_)(`NT$${x.total.total}`),1)]),(0,a.Lk)("div",S,[V,(x.isCouponCode,(0,a.uX)(),(0,a.CE)("div",A,(0,l.v_)("-NT$"+(x.total.total-x.total.final_total)),1))])])]),(0,a.Lk)("div",I,[(0,a.Lk)("div",M,[(0,a.Lk)("div",z,[(0,a.Lk)("div",B,(0,l.v_)(`NT$${x.total.final_total}`),1)])])])]),(0,a.Lk)("div",G,[(0,a.Lk)("button",{type:"button",onClick:e[4]||(e[4]=e=>t.$router.push("/user/cart")),class:"col-auto col-lg-auto btn btn-outline-primary order__btn"}," 繼續購物 "),(0,a.Lk)("button",{type:"button",class:"col-auto col-lg-auto btn btn-primary order__btn",onClick:e[5]||(e[5]=e=>t.$router.push("/order/info"))}," 下一步 ")])])):((0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("div",O,[Q,R,(0,a.Lk)("button",{type:"button",class:"btn btn-primary px-5",onClick:e[6]||(e[6]=e=>t.$router.push("/user/cart"))}," 前往購物 ")])]))],64)}var Y={data(){return{product:[],total:{},isLoading:!1,isNew:!1,coupon_code:"",isCouponCode:!1}},inject:["emitter","$httpMessageState"],methods:{addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/patty-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then((()=>{this.isCouponCode=!0,this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},changeProduct(t,e){const o="https://vue3-course-api.hexschool.io/api/patty-api/cart",a={product_id:t,qty:e};this.$http.post(o,{data:a}).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},delProduct(t){const e=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t}`;this.$http.delete(e).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},updateProducts(t,e){const o=`https://vue3-course-api.hexschool.io/api/patty-api/cart/${t.id}`,a={product_id:t.product_id,qty:e};this.$http.put(o,{data:a}).then((()=>{this.getProducts()})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))},getProducts(){const t="https://vue3-course-api.hexschool.io/api/patty-api/cart";this.$http.get(t).then((t=>{this.isLoading=!1,this.product=t.data.data.carts,this.total.final_total=t.data.data.final_total,this.total.total=t.data.data.total})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"取得訂單失敗",content:"抱歉，出現系統問題，請聯絡我們！"})}))}},created(){this.isLoading=!0,this.getProducts()}},Z=o(1241);const tt=(0,Z.A)(Y,[["render",W]]);var et=tt}}]);
//# sourceMappingURL=340.b519583b.js.map